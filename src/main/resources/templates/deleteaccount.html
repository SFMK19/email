<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete Account</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="userinfo.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>
    <div class="sidebar">
        <h1>Welcome!</h1>
        <a href="home_page_auth">Home</a>
        <a href="user_home_page">My profile</a>
        <a href="user_order">My subscriptions</a>
        <a href="user_appointment">My appointments</a>
        <a href="user_changepsw">Change password</a>
        <a href="user_delete">Delete account</a>
        <a href="#logoutModal" data-bs-target="#logoutModal" data-bs-toggle="modal">Log out</a>
    </div>
    <section class="bg-secondary-subtle" id="page-content">
        <div class="row">
            <div class="col-12">
                <div class="card mt-5 bg-white border-0">
                    <div class="card-body">
                        <h2 class="card-title mb-4">Delete Account</h2>
                        <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>Error!</strong> <span th:text="${error}"></span>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                        <p class="lead"><strong>Warning:</strong> Deleting your account means permanently removing all your data and access to our platform. This action cannot be undone. Please consider the following before proceeding:</p>

                        <ol class="lead">
                            <li><strong>Data Loss:</strong> Once you delete your account, all your profile information, posts, messages, and any associated data will be permanently erased from our system.</li>
                            <li><strong>Loss of Access:</strong> You will no longer be able to log in to your account or access any of the features and services provided on our platform.</li>
                            <li><strong>No Recovery:</strong> We cannot recover your account or any of its data after deletion. Make sure you have backed up any important information before proceeding.</li>
                            <li><strong>Subscriptions or Services:</strong> If you have any active subscriptions or services tied to your account, they may be terminated upon deletion, and any remaining credits or benefits may be forfeited.</li>
                            <li><strong>Impact on Connected Accounts:</strong> If your account is linked to other services or platforms, deleting it here may affect your access or functionality on those platforms.</li>
                        </ol>

                        <p class="lead">Please be absolutely certain before proceeding with the deletion of your account. If you are sure you want to proceed, please confirm your action below. Otherwise, you may cancel to retain access to your account.</p>
                        <div class="border lead fw-bold">
                            <p class="ms-3 mb-2 mt-2">This is permanent. Once the deletion process begins, you won't be able to retrieve your account.</p>
                            <button type="button" class="btn btn-danger ms-3 mb-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                <i class="bi bi-trash me-1"></i>Delete Account
                            </button>
                        </div>
                        

                        <!-- Modal -->
                        <div class="modal fade" id="exampleModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered ">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel">Delete Account</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                Deleting your account will remove all of your information from our database. This cannot be undone.
                                <div>
                                    <p class="lead">To confirm this, type in your username and password.</p>
                                </div>
                                    <form action="user_delete" id="myForm" method="POST">
                                        <label for="username" class="form-label-sm">Username</label>
                                        <div class="input-group mb-3 w-100">
                                            <input type="text" class="form-control" id="username" name="username" aria-describedby="username" required>
                                        </div>
                                    
                                        <label for="password" class="form-label-sm">Password</label>
                                        <div class="input-group mb-3 w-100">
                                            <input type="password" class="form-control" id="password" name="password" aria-describedby="password" required>
                                        </div>
                                    </form>
                                    
                                </div>
                                <div class="modal-footer justify-content-start">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-danger" form="myForm">Delete</button>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        </div>
    </section>

    <!-- Modal -->
    <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Logout Confirmation</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            Are you sure you want to log out?
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <a type="button" class="btn btn-warning" href="user_home_page/logout">Log out</a>
            </div>
        </div>
        </div>
    </div>

</body>
</html>